# Backend Environment Configuration Template
# Copy this file to .env.local and update with your actual values

# ==============================================================================
# REQUIRED VARIABLES (Application will not start without these)
# ==============================================================================

# Database Connection (PostgreSQL via Supabase)
# CRITICAL: DATABASE_URL and DIRECT_URL must be DIFFERENT
# - DATABASE_URL: Uses connection pooling (port 6543 for cloud, 54322 for local)
# - DIRECT_URL: Direct connection for migrations (port 5432 for cloud, 54322 for local)
#
# LOCAL (with 'supabase start'):
DATABASE_URL="postgresql://postgres:postgres@localhost:54322/postgres"
DIRECT_URL="postgresql://postgres:postgres@localhost:54322/postgres"
#
# CLOUD (replace with your project values from Supabase dashboard):
# DATABASE_URL="postgresql://postgres:[PASSWORD]@db.[PROJECT_REF].supabase.co:6543/postgres?pgbouncer=true"
# DIRECT_URL="postgresql://postgres:[PASSWORD]@db.[PROJECT_REF].supabase.co:5432/postgres"

# Supabase Configuration (REQUIRED - app throws error if missing)
# LOCAL: These are standard keys from 'supabase start' (safe to commit)
SUPABASE_URL="http://localhost:54321"
SUPABASE_ANON_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0"
#
# CLOUD: Get these from https://app.supabase.com → Project Settings → API
# SUPABASE_URL="https://[PROJECT_REF].supabase.co"
# SUPABASE_ANON_KEY="your-anon-key-here"

# ==============================================================================
# OPTIONAL VARIABLES (Used for testing and development)
# ==============================================================================

# Supabase Service Role Key (Admin SDK - ONLY needed for E2E tests)
# NOT required for production API (security best practice)
# Used for: Test user cleanup, admin operations in test helpers
SUPABASE_SERVICE_ROLE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImV4cCI6MTk4MzgxMjk5Nn0.EGIM96RAZx35lJzdJsyH-qQwv8Hdp7fsn3W0YpN81IU"

# Server Configuration (defaults shown)
NODE_ENV=development
PORT=3000
API_PREFIX=api

# ==============================================================================
# INSTRUCTIONS
# ==============================================================================
# 1. Copy this file: cp apps/backend/.env.example apps/backend/.env.local
# 2. For LOCAL development:
#    - Use values as-is
#    - Run 'supabase start' in main worktree before starting backend
#    - Docker containers will auto-override to use host.docker.internal
# 3. For CLOUD Supabase:
#    - Update SUPABASE_URL and SUPABASE_ANON_KEY from your project dashboard
#    - Update DATABASE_URL and DIRECT_URL with your connection strings
#    - IMPORTANT: Use port 6543 (pooled) for DATABASE_URL
#    - IMPORTANT: Use port 5432 (direct) for DIRECT_URL
# 4. Never commit .env.local (git-ignored for security)
